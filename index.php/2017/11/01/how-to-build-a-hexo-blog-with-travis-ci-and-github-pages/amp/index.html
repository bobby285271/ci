<!DOCTYPE html>
<html amp lang="zh-CN" i-amphtml-layout="" i-amphtml-no-boilerplate="" transformed="self;v=1">
<head><meta charset="utf-8"><style amp-runtime="" i-amphtml-version="012004172112280">html{overflow-x:hidden!important}html.i-amphtml-fie{height:100%!important;width:100%!important}html:not([amp4ads]),html:not([amp4ads]) body{height:auto!important}html:not([amp4ads]) body{margin:0!important}body{-webkit-text-size-adjust:100%;-moz-text-size-adjust:100%;-ms-text-size-adjust:100%;text-size-adjust:100%}html.i-amphtml-singledoc.i-amphtml-embedded{-ms-touch-action:pan-y;touch-action:pan-y}html.i-amphtml-fie>body,html.i-amphtml-singledoc>body{overflow:visible!important}html.i-amphtml-fie:not(.i-amphtml-inabox)>body,html.i-amphtml-singledoc:not(.i-amphtml-inabox)>body{position:relative!important}html.i-amphtml-webview>body{overflow-x:hidden!important;overflow-y:visible!important;min-height:100vh!important}html.i-amphtml-ios-embed-legacy>body{overflow-x:hidden!important;overflow-y:auto!important;position:absolute!important}html.i-amphtml-ios-embed{overflow-y:auto!important;position:static}#i-amphtml-wrapper{overflow-x:hidden!important;overflow-y:auto!important;position:absolute!important;top:0!important;left:0!important;right:0!important;bottom:0!important;margin:0!important;display:block!important}html.i-amphtml-ios-embed.i-amphtml-ios-overscroll,html.i-amphtml-ios-embed.i-amphtml-ios-overscroll>#i-amphtml-wrapper{-webkit-overflow-scrolling:touch!important}#i-amphtml-wrapper>body{position:relative!important;border-top:1px solid transparent!important}#i-amphtml-wrapper+body{visibility:visible}#i-amphtml-wrapper+body .i-amphtml-lightbox-element,#i-amphtml-wrapper+body[i-amphtml-lightbox]{visibility:hidden}#i-amphtml-wrapper+body[i-amphtml-lightbox] .i-amphtml-lightbox-element{visibility:visible}#i-amphtml-wrapper.i-amphtml-scroll-disabled,.i-amphtml-scroll-disabled{overflow-x:hidden!important;overflow-y:hidden!important}amp-instagram{padding:54px 0px 0px!important;background-color:#fff}amp-iframe iframe{box-sizing:border-box!important}[amp-access][amp-access-hide]{display:none}[subscriptions-dialog],body:not(.i-amphtml-subs-ready) [subscriptions-action],body:not(.i-amphtml-subs-ready) [subscriptions-section]{display:none!important}amp-experiment,amp-live-list>[update],amp-share-tracking{display:none}.i-amphtml-jank-meter{position:fixed;background-color:rgba(232,72,95,0.5);bottom:0;right:0;color:#fff;font-size:16px;z-index:1000;padding:5px}amp-list[resizable-children]>.i-amphtml-loading-container.amp-hidden{display:none!important}amp-list[load-more] [load-more-button],amp-list[load-more] [load-more-end],amp-list[load-more] [load-more-failed],amp-list[load-more] [load-more-loading]{display:none}amp-story-page,amp-story[standalone]{min-height:1px!important;display:block!important;height:100%!important;margin:0!important;padding:0!important;overflow:hidden!important;width:100%!important}amp-story[standalone]{background-color:#202125!important;position:relative!important}amp-story-page{background-color:#757575}amp-story .amp-active>div{display:none!important}amp-story-page:not(:first-of-type):not([distance]):not([active]){transform:translateY(1000vh)!important}amp-autocomplete{position:relative!important;display:inline-block!important}amp-autocomplete>input,amp-autocomplete>textarea{padding:0.5rem;border:1px solid rgba(0,0,0,0.33)}.i-amphtml-autocomplete-results,amp-autocomplete>input,amp-autocomplete>textarea{font-size:1rem;line-height:1.5rem}[amp-fx^=fly-in]{visibility:hidden}
/*# sourceURL=/css/ampdoc.css*/[hidden]{display:none!important}.i-amphtml-element{display:inline-block}.i-amphtml-blurry-placeholder{transition:opacity 0.3s cubic-bezier(0.0,0.0,0.2,1)!important}[layout=nodisplay]:not(.i-amphtml-element){display:none!important}.i-amphtml-layout-fixed,[layout=fixed][width][height]:not(.i-amphtml-layout-fixed){display:inline-block;position:relative}.i-amphtml-layout-responsive,[layout=responsive][width][height]:not(.i-amphtml-layout-responsive),[width][height][sizes]:not(.i-amphtml-layout-responsive){display:block;position:relative}.i-amphtml-layout-intrinsic{display:inline-block;position:relative;max-width:100%}.i-amphtml-intrinsic-sizer{max-width:100%;display:block!important}.i-amphtml-layout-container,.i-amphtml-layout-fixed-height,[layout=container],[layout=fixed-height][height]{display:block;position:relative}.i-amphtml-layout-fill,[layout=fill]:not(.i-amphtml-layout-fill){display:block;overflow:hidden!important;position:absolute;top:0;left:0;bottom:0;right:0}.i-amphtml-layout-flex-item,[layout=flex-item]:not(.i-amphtml-layout-flex-item){display:block;position:relative;-ms-flex:1 1 auto;flex:1 1 auto}.i-amphtml-layout-fluid{position:relative}.i-amphtml-layout-size-defined{overflow:hidden!important}.i-amphtml-layout-awaiting-size{position:absolute!important;top:auto!important;bottom:auto!important}i-amphtml-sizer{display:block!important}.i-amphtml-blurry-placeholder,.i-amphtml-fill-content{display:block;height:0;max-height:100%;max-width:100%;min-height:100%;min-width:100%;width:0;margin:auto}.i-amphtml-layout-size-defined .i-amphtml-fill-content{position:absolute;top:0;left:0;bottom:0;right:0}.i-amphtml-layout-intrinsic .i-amphtml-sizer{max-width:100%}.i-amphtml-replaced-content,.i-amphtml-screen-reader{padding:0!important;border:none!important}.i-amphtml-screen-reader{position:fixed!important;top:0px!important;left:0px!important;width:4px!important;height:4px!important;opacity:0!important;overflow:hidden!important;margin:0!important;display:block!important;visibility:visible!important}.i-amphtml-screen-reader~.i-amphtml-screen-reader{left:8px!important}.i-amphtml-screen-reader~.i-amphtml-screen-reader~.i-amphtml-screen-reader{left:12px!important}.i-amphtml-screen-reader~.i-amphtml-screen-reader~.i-amphtml-screen-reader~.i-amphtml-screen-reader{left:16px!important}.i-amphtml-unresolved{position:relative;overflow:hidden!important}.i-amphtml-select-disabled{-webkit-user-select:none!important;-moz-user-select:none!important;-ms-user-select:none!important;user-select:none!important}.i-amphtml-notbuilt,[layout]:not(.i-amphtml-element){position:relative;overflow:hidden!important;color:transparent!important}.i-amphtml-notbuilt:not(.i-amphtml-layout-container)>*,[layout]:not([layout=container]):not(.i-amphtml-element)>*{display:none}.i-amphtml-ghost{visibility:hidden!important}.i-amphtml-element>[placeholder],[layout]:not(.i-amphtml-element)>[placeholder]{display:block}.i-amphtml-element>[placeholder].amp-hidden,.i-amphtml-element>[placeholder].hidden{visibility:hidden}.i-amphtml-element:not(.amp-notsupported)>[fallback],.i-amphtml-layout-container>[placeholder].amp-hidden,.i-amphtml-layout-container>[placeholder].hidden{display:none}.i-amphtml-layout-size-defined>[fallback],.i-amphtml-layout-size-defined>[placeholder]{position:absolute!important;top:0!important;left:0!important;right:0!important;bottom:0!important;z-index:1}.i-amphtml-notbuilt>[placeholder]{display:block!important}.i-amphtml-hidden-by-media-query{display:none!important}.i-amphtml-element-error{background:red!important;color:#fff!important;position:relative!important}.i-amphtml-element-error:before{content:attr(error-message)}i-amp-scroll-container,i-amphtml-scroll-container{position:absolute;top:0;left:0;right:0;bottom:0;display:block}i-amp-scroll-container.amp-active,i-amphtml-scroll-container.amp-active{overflow:auto;-webkit-overflow-scrolling:touch}.i-amphtml-loading-container{display:block!important;pointer-events:none;z-index:1}.i-amphtml-notbuilt>.i-amphtml-loading-container{display:block!important}.i-amphtml-loading-container.amp-hidden{visibility:hidden}.i-amphtml-element>[overflow]{cursor:pointer;position:relative;z-index:2;visibility:hidden}.i-amphtml-element>[overflow].amp-visible{visibility:visible}template{display:none!important}.amp-border-box,.amp-border-box *,.amp-border-box :after,.amp-border-box :before{box-sizing:border-box}amp-pixel{display:none!important}amp-analytics,amp-story-auto-ads{position:fixed!important;top:0!important;width:1px!important;height:1px!important;overflow:hidden!important;visibility:hidden}html.i-amphtml-fie>amp-analytics{position:initial!important}[visible-when-invalid]:not(.visible),amp-list [fetch-error],form [submit-error],form [submit-success],form [submitting]{display:none}amp-accordion{display:block!important}amp-accordion>section{float:none!important}amp-accordion>section>*{float:none!important;display:block!important;overflow:hidden!important;position:relative!important}amp-accordion,amp-accordion>section{margin:0}amp-accordion>section>:last-child{display:none!important}amp-accordion>section[expanded]>:last-child{display:block!important}
/*# sourceURL=/css/ampshared.css*/</style><meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1"><meta name="generator" content="AMP Plugin v1.5.3; mode=reader"><title>How to Build a Hexo Blog With Travis CI and GitHub Pages – Dasyatis</title><link rel="preconnect" href="https://cdn.ampproject.org"><link rel="preload" as="script" href="https://cdn.ampproject.org/v0.js"><script async="" src="https://cdn.ampproject.org/v0.js"></script><style amp-custom="">.wp-block-code{font-family:Menlo,Consolas,monaco,monospace;font-size:14px;color:#23282d;padding:.8em 1em;border:1px solid #e2e4e7;border-radius:4px}html{background:#0a89c0}body{background:#fff;color:#353535;font-family:Georgia,"Times New Roman",Times,Serif;font-weight:300;line-height:1.75em}p{margin:0 0 1em;padding:0}a,a:visited{color:#0a89c0}a:hover,a:active,a:focus{color:#353535}.amp-wp-meta,.amp-wp-header div,.amp-wp-title,.amp-wp-tax-category,.amp-wp-tax-tag,.amp-wp-comments-link,.amp-wp-footer p,.back-to-top{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Roboto","Oxygen-Sans","Ubuntu","Cantarell","Helvetica Neue",sans-serif}.amp-wp-header{background-color:#0a89c0}.amp-wp-header div{color:#fff;font-size:1em;font-weight:400;margin:0 auto;max-width:calc(840px - 32px);padding:.875em 16px;position:relative}.amp-wp-header a{color:#fff;text-decoration:none}.amp-wp-article{color:#353535;font-weight:400;margin:1.5em auto;max-width:840px;overflow-wrap:break-word;word-wrap:break-word}.amp-wp-article-header{align-items:center;align-content:stretch;display:flex;flex-wrap:wrap;justify-content:space-between;margin:1.5em 16px 0}.amp-wp-title{color:#353535;display:block;flex:1 0 100%;font-weight:900;margin:0 0 .625em;width:100%}.amp-wp-meta{color:#696969;display:inline-block;flex:2 1 50%;font-size:.875em;line-height:1.5em;margin:0 0 1.5em;padding:0}.amp-wp-article-header .amp-wp-meta:last-of-type{text-align:right}.amp-wp-article-header .amp-wp-meta:first-of-type{text-align:left}.amp-wp-byline amp-img,.amp-wp-byline .amp-wp-author{display:inline-block;vertical-align:middle}.amp-wp-byline amp-img{border:1px solid #0a89c0;border-radius:50%;position:relative;margin-right:6px}.amp-wp-posted-on{text-align:right}.amp-wp-article-content{margin:0 16px}.amp-wp-article-content amp-img{margin:0 auto}.amp-wp-article-footer .amp-wp-meta{display:block}.amp-wp-tax-category,.amp-wp-tax-tag{color:#696969;font-size:.875em;line-height:1.5em;margin:1.5em 16px}.amp-wp-comments-link{color:#696969;font-size:.875em;line-height:1.5em;text-align:center;margin:2.25em 0 1.5em}.amp-wp-comments-link a{border-style:solid;border-color:#c2c2c2;border-width:1px 1px 2px;border-radius:4px;background-color:transparent;color:#0a89c0;cursor:pointer;display:block;font-size:14px;font-weight:600;line-height:18px;margin:0 auto;max-width:200px;padding:11px 16px;text-decoration:none;width:50%;-webkit-transition:background-color .2s ease;transition:background-color .2s ease}.amp-wp-footer{border-top:1px solid #c2c2c2;margin:calc(1.5em - 1px) 0 0}.amp-wp-footer div{margin:0 auto;max-width:calc(840px - 32px);padding:1.25em 16px 1.25em;position:relative}.amp-wp-footer h2{font-size:1em;line-height:1.375em;margin:0 0 .5em}.amp-wp-footer p{color:#696969;font-size:.8em;line-height:1.5em;margin:0 85px 0 0}.amp-wp-footer a{text-decoration:none}.back-to-top{bottom:1.275em;font-size:.8em;font-weight:600;line-height:2em;position:absolute;right:16px}

/*# sourceURL=amp-custom.css */</style><link rel="canonical" href="../../../../../../index.html%3Fp=915.html"><script type="application/ld+json">{"@context":"http:\/\/schema.org","publisher":{"@type":"Organization","name":"Dasyatis","logo":"https:\/\/www.bobby285271.top\/wp-content\/plugins\/amp\/assets\/images\/amp-page-fallback-wordpress-publisher-logo.png"},"@type":"BlogPosting","mainEntityOfPage":"https:\/\/www.bobby285271.top\/index.php\/2017\/11\/01\/how-to-build-a-hexo-blog-with-travis-ci-and-github-pages\/","headline":"How to Build a Hexo Blog With Travis CI and GitHub Pages","datePublished":"2017-10-31T16:00:57+08:00","dateModified":"2017-10-31T16:00:57+08:00","author":{"@type":"Person","name":"Bobby Rong"},"image":{"@type":"ImageObject","url":"https:\/\/cn.gravatar.com\/1d4930fdc37d3baf980e8e6e8ffc224e?s=200&d=mm&r=g","width":200,"height":200}}</script></head>

<body class="">

<header id="top" class="amp-wp-header">
	<div>
		<a href="../../../../../../index.html">
									<span class="amp-site-title">
				Dasyatis			</span>
		</a>

					</div>
</header>

<article class="amp-wp-article">
	<header class="amp-wp-article-header">
		<h1 class="amp-wp-title">How to Build a Hexo Blog With Travis CI and GitHub Pages</h1>
			<div class="amp-wp-meta amp-wp-byline">
					<amp-img src="https://cn.gravatar.com/1d4930fdc37d3baf980e8e6e8ffc224e?s=24&amp;d=mm&amp;r=g" alt="Bobby Rong" width="24" height="24" layout="fixed" class="i-amphtml-layout-fixed i-amphtml-layout-size-defined" style="width:24px;height:24px;" i-amphtml-layout="fixed"></amp-img>
				<span class="amp-wp-author author vcard">Bobby Rong</span>
	</div>
<div class="amp-wp-meta amp-wp-posted-on">
	<time datetime="2017-11-01T00:00:57+00:00">
		2年 ago	</time>
</div>
	</header>

	
	<div class="amp-wp-article-content">
		
<p><strong>2020 年更新：</strong>这篇文章是在两三年前我还在读中学的时候完成的，当时 Material 主题还是很火的，也没有 GitHub Actions。当然现在有了 GitHub Actions，Material 主题的开发似乎也没有之前那么活跃了。然而我也换到了 WordPress 懒得重写这篇文章。想使用 Hexo 的同学可以参考一下这里的思路，尝试使用新的方式、新的主题完成博客的搭建。</p>



<p><strong>所有代码中带有全角中括号【】的地方请务必作相应的替换，不要保留该括号。</strong></p>



<h2>扫盲</h2>



<h3>Hexo</h3>



<p><a href="https://hexo.io/zh-cn" target="_blank" rel="nofollow">Hexo</a> 是一个快速、简洁且高效的博客框架。Hexo 使用 <a href="https://daringfireball.net/projects/markdown" target="_blank" rel="nofollow">Markdown</a>（或其他渲染引擎）解析文章，在几秒内，即可利用靓丽的主题生成静态网页。</p>



<h3>Git</h3>



<p><a href="https://git-scm.com" target="_blank" rel="nofollow">Git</a> 是 Linus Torvalds 为了帮助管理 <a href="https://www.kernel.org" target="_blank" rel="nofollow">Linux</a> 内核开发而开发的一个开放源码的版本控制软件，可以有效、高速的处理从很小到非常大的项目版本管理。</p>



<h3>GitHub</h3>



<p><a href="https://github.com" target="_blank" rel="nofollow">GitHub</a> 是最大的 Git 版本库托管商，是成千上万的开发者和项目能够合作进行的中心。 大部分 Git 版本库都托管在 GitHub，很多开源项目使用 GitHub 实现 Git 托管、问题追踪、代码审查以及其它事情。</p>



<h3>Travis CI</h3>



<p><a href="https://travis-ci.org" target="_blank" rel="nofollow">Travis CI</a> 是目前新兴的开源持续集成构建项目，它采用 <a href="http://www.yaml.org" target="_blank" rel="nofollow">YAML</a> 格式，简洁清新独树一帜。目前不少 GitHub 项目都已经移入到 Travis CI 的构建队列中。</p>



<h2>铺垫</h2>



<h3>GitHub &amp; Git 上手</h3>



<h4>注册 GitHub 账户并验证邮箱</h4>



<p>前往 <a href="https://github.com/join" target="_blank" rel="nofollow">这里</a> 注册邮箱，详情请阅读 <a href="https://help.github.com/articles/signing-up-for-a-new-github-account" target="_blank" rel="nofollow">官方文档（英文）</a> 和 <a href="http://jingyan.baidu.com/article/455a9950abe0ada167277864.html" target="_blank" rel="nofollow">百度经验上的教程</a>；前往<a href="https://github.com/settings/emails" target="_blank" rel="nofollow">这里</a> 验证邮箱，详情请阅读 <a href="https://help.github.com/articles/verifying-your-email-address" target="_blank" rel="nofollow">官方文档（英文）</a>。</p>



<h4>GitHub 基本图形化操作</h4>



<p>请阅读 <a href="https://guides.github.com/activities/hello-world" target="_blank" rel="nofollow">官方文档（英文）</a>，<a href="http://blog.csdn.net/kabulore/article/details/51801337" target="_blank" rel="nofollow">这里</a> 提供了中文翻译。这个指南将帮助你了解创建和使用仓库、创建和管理分支、改变一个文件并将它提交到 GitHub 上和发起以及合并请求的方法。</p>



<h4>最最最基本的几个 Git 命令</h4>



<p>别被百度出来的什么命令大全吓到了，其实无非就几个命令：<br>* <code>git init</code>：在当前目录新建一个 Git 代码库;<br>* <code>git clone 【项目 URL】</code>：下载一个项目和它的整个代码历史；<br>* <code>git add -A</code>：添加当前目录的所有文件到暂存区；<br>* <code>git commit -m 【提交信息】</code>：提交暂存区到仓库区；<br>* <code>git push 【远程仓库别称】 【分支】</code>：上传本地指定分支到远程仓库；<br>* <code>git pull 【远程仓库别称】 【分支】</code>：取回远程仓库的变化，并与本地分支合并；<br>* <code>git branch 【分支】</code>：新建一个分支，但依然停留在当前分支；<br>* <code>git checkout 【分支】</code>：切换到指定分支，并更新工作区。</p>



<p>若想深入学习可阅读 <a href="http://www.ruanyifeng.com/blog/2015/12/git-cheat-sheet.html" target="_blank" rel="nofollow">常用 Git 命令清单</a> 和 <a href="https://git-scm.com/book/zh" target="_blank" rel="nofollow">官方文档</a>，实际上等你真的用到这些功能时再百度慢慢学也不迟。当然，如果你连这些基本命令都看不懂，没关系，我们会在后面具体地介绍它们。</p>



<h3>Markdown 语法上手</h3>



<p>这是写博客必备的一种语法，而且学起来比你想象中简单很多，这里提供一个 <a href="http://www.appinn.com/markdown" target="_blank" rel="nofollow">说明文档</a> 和一个 <a href="http://commonmark.org/help/tutorial" target="_blank" rel="nofollow">交互式入门向导（英文）</a>。</p>



<h2>开始</h2>



<h3>迈出第一步</h3>



<p>进入 GitHub 网站，登录你的账户，新建一个名为 <code>【你的 GitHub 用户名】.github.io</code> 的仓库，具体操作不再细讲。接下来应该看到的是类似这样的东西：</p>



<pre class="wp-block-code"><code>Quick setup — if you’ve done this kind of thing before
or https://github.com/xxx/xxx.github.io.git

We recommend every repository include a README, LICENSE, and .gitignore.
…or create a new repository on the command line

echo "# xxx.github.io" &gt;&gt; README.md
git init
git add README.md
git commit -m "first commit"
git remote add origin https://github.com/xxx/xxx.github.io.git
git push -u origin master

…or push an existing repository from the command line

git remote add origin https://github.com/xxx/xxx.github.io.git
git push -u origin master

…or import code from another repository

You can initialize this repository with code from a Subversion, Mercurial, or TFS project.
</code></pre>



<p>然而<code>README</code>、<code>LICENSE</code> 和 <code>.gitignore</code>，我一个都不想建，我们要开始建立用于初始化 Hexo 的 Travis CI 配置文件，“Create new file”的按钮我又找不到？很简单，文件都是可以改名的嘛，点击“README”这个链接，把人家帮你填的东西全部删掉，就可以开始你的骚操作啦。</p>



<h3>初始化 Hexo 的 Travis CI 配置文件</h3>



<p>将新建的文件命名为 <code>.travis.yml</code>（请勿改名），然后填写以下内容：</p>



<pre class="wp-block-code"><code>language: node_js
node_js: stable

install:
  - npm install hexo-cli -g

script:
  - hexo init blog
  - cd blog/

after_script:
  - git init
  - git config user.name "【你的大名，如 Bobby Rong】"
  - git config user.email "【你的邮箱】"
  - git add -A
  - git commit -m "【提交信息，如 Update files】"
  - git push --force --quiet "https://${githubblog}@${GH_REF}" master

branches:
  only:
  - master

env:
 global:
  - GH_REF: github.com/【你的 GitHub 用户名】/【你的 GitHub 用户名】.github.io.git
</code></pre>



<p>作相应替换后点击“Commit new file”即可。下面我来解释一下这是在干什么：这是初始化 Hexo 的 Travis CI 配置文件，待会把这个仓库加入构建队列，Travis 就会依次执行 <code>install</code>、<code>script</code> 和 <code>after_script</code> 这三个部分里面的命令，这些命令前面要加一个 <code>-</code> 千万别漏掉了。<br>* <code>npm install hexo-cli -g</code>：安装 Hexo-cli；<br>* <code>hexo init blog</code>：初始化博客；<br>* <code>git init</code>：初始化 Git 目录；<br>* <code>git config user.name "【你的大名，如 Bobby Rong】"</code>：配置 Git，填写提交者姓名（昵称也行）；<br>* <code>git config user.email "【你的邮箱】"</code>：配置 Git，填写提交者邮箱；<br>* <code>git add -A</code>：添加当前目录的所有文件到暂存区；<br>* <code>git commit -m "【提交信息，如 Update files】</code>：提交暂存区到仓库区，提交信息可以随便填写；<br>* <code>git push --force --quiet "https://${githubblog}@${GH_REF}" master</code>：上传本地指定分支到远程仓库的 master 分支，${GH_REF} 为变量，Travis CI 会赋什么值扫一眼下面就知道了：<code>github.com/【你的 GitHub 用户名】/【你的 GitHub 用户名】.github.io.git</code>，${githubblog} 在后续配置后，会被 Travis CI 换成你 GitHub 的 Access Token，至于两个变量名为啥画风完全不同，嗯是故意的，就是为了烧死强迫症嘛。不过为了避免改完后到后面复制粘贴太爽有不知道改哪里，忍了吧。</p>



<h3>配置 Travis CI</h3>



<h4>新建 Access Token</h4>



<p>毕竟 Travis CI 是不可能在提交代码时向你询问 GitHub 账户密码的，所以就有了这个东西的产生。</p>



<p>首先我们来到 GitHub 的设置界面（没错就是点 GitHub 右上角的头像再点“Settings”），点击“Personal access tokens”，点击右上角的“Generate new token”按钮生成一个，点击后它会叫你输入密码，然后来到如下界面：</p>



<pre class="wp-block-code"><code>New personal access token

Personal access tokens function like ordinary OAuth access tokens. They can be used instead of a password for Git over HTTPS, or can be used to authenticate to the API over Basic Authentication.

Token description
____________________
What's this token for?

Select scopes
Scopes define the access for personal tokens. Read more about OAuth scopes.

（下面就是一堆东西让你去勾选的）
</code></pre>



<p>在 Token description 随便填个标题，下面是勾选一些权限，每一项旁边都有解释的，有强迫症的可以想想部署一个 Hexo 它应该需要一些什么权限，然后按需勾选；没有强迫症的就全部勾选了吧，反正 Travis CI 也只是乖乖地跑你的代码而已，真的出了事也只能怪你。</p>



<p>生成完后，把那一串东西拷贝下来找个地方妥善保存，注意这和密码是一回事，不要偷懒把它放到 GitHub 上或别人能看到的地方。注意只有这时候它才显示出来，为了安全它以后就再也不会显示了，如果忘了只能重新生成一个了。</p>



<h4>添加环境变量与设定构建条件</h4>



<p>这时候就要前往 <a href="https://travis-ci.org" target="_blank" rel="nofollow">Travis CI</a> 了。使用你的 GitHub 账户登录，随后前往 Accounts 页面（点击右上角的头像，选择“Accounts”）,找到"【你的 GitHub 用户名】/【你的 GitHub 用户名】.github.io"这一行，点击旁边的小齿轮进入该仓库的设置页面。</p>



<p>几个地方需要设定：<br>* Gerenal 中启用“Build only if .travis.yml is present”和“Build branch updates”，不启用剩余两个；<br>* Environment Variables 中新建一个环境变量，在“Name”填写 <code>githubblog</code>（如果你手贱真的把前面的变量名改了记得把这里的也给改掉），“Value”填写你复制的那一串 Access Token，旁边的“Display value in build log”千万别启用，前面说过原因了。</p>



<p>其它的如果你知道这是在干什么可以自己设定，不知道的都不用碰了。</p>



<h3>你的第一次构建</h3>



<p>在当前页面，点击“Current”，然后激活这个仓库。理论上你应该能看到 Build #1 正在运行，Job log 应该有东西在滚动输出。如果没有，只需点击“More options”，选择“Trigger build”，什么都不用设定，只需点击“Trigger custom build”就可以开始了，最终的构建日志看起来大概是这样的：</p>



<pre class="wp-block-code"><code>Worker information
Build system information

W: http://dl.hhvm.com/ubuntu/dists/trusty/InRelease: Signature by key 36AEF64D0207E7EEE352D4875A16E7281BE7A449 uses weak digest algorithm (SHA1)
W: http://ppa.launchpad.net/couchdb/stable/ubuntu/dists/trusty/Release.gpg: Signature by key 15866BAFD9BCC4F3C1E0DFC7D69548E1C17EAB57 uses weak digest algorithm (SHA1)
$ git clone --depth=50 --branch=test https://github.com/xxx/xxx.github.io.git

Setting environment variables from repository settings
$ export githubblog=[secure]

Setting environment variables from .travis.yml
$ export GH_REF=github.com/bobby285271/blog-test.git

$ export PATH=./node_modules/.bin:$PATH
Updating nvm
$ nvm install stable
$ node --version
v8.6.0
$ npm --version
5.3.0
$ nvm --version
0.33.4
$ npm install hexo-cli -g
$ hexo init blog
INFO  Cloning hexo-starter to ~/build/bobby285271/blog-test/blog
Cloning into '/home/travis/build/bobby285271/blog-test/blog'...
Submodule 'themes/landscape' (https://github.com/hexojs/hexo-theme-landscape.git) registered for path 'themes/landscape'
Cloning into '/home/travis/build/bobby285271/blog-test/blog/themes/landscape'...
Submodule path 'themes/landscape': checked out 'decdc2d9956776cbe95420ae94bac87e22468d38'
INFO  Install dependencies
yarn install v0.27.5
info No lockfile found.
[1/4] Resolving packages...
warning hexo &gt; swig@1.4.2: This package is no longer maintained
[2/4] Fetching packages...
warning fsevents@1.1.2: The platform "linux" is incompatible with this module.
info "fsevents@1.1.2" is an optional dependency and failed compatibility check. Excluding it from installation.
[3/4] Linking dependencies...
[4/4] Building fresh packages...
success Saved lockfile.
Done in 10.64s.
INFO  Start blogging with Hexo!


The command "hexo init blog" exited with 0.
$ cd blog/


The command "cd blog/" exited with 0.
$ git init
$ git config user.name "xxx"
$ git config user.email "xxx@xxx.com"
$ git add -A
$ git commit -m "xxx"
$ git push --force --quiet "https://${githubblog}@${GH_REF}" master

Done. Your build exited with 0.
</code></pre>



<h2>站点配置</h2>



<p>回去 GitHub，重新进入 <code>【你的 GitHub 用户名】.github.io</code> 仓库，是否发现多了很多玩意？有这几个文件：<code>scaffolds/</code>、<code>source/</code>、<code>.gitignore</code>、<code>_config.yml</code>、<code>package.json</code>、<code>yarn.lock</code>，暂时不用管发生了什么，先把站点配置好。</p>



<h3>新建分支</h3>



<p>由于 GitHub 要求最终生成的网页必须在 master 分支，而我们却把源文件放在了这个分支，非常尴尬，把内容迁移走吧。很简单，只需新建一个分支，这里假设叫“blog-source”，同理，如果你不知道后面哪个地方要做相应调整就用这个名字吧。然后把这个新分支设定为默认分支（除非你知道后面要怎么相应作调整否则一定要设），点击那个“2 branches”，点击“Change default branch”，在“Default branch”这一栏有一个下拉框，选择新建的分支再选择“Update”。有些时候会让你输密码，完事。</p>



<h3>挑选一个主题</h3>



<p>终于不用面对一堆代码了，下面是考验你审美能力的时间。百度 Hexo 主题，选择一个你喜欢的又有 GitHub 仓库链接的主题。<a href="https://www.zhihu.com/question/24422335" target="_blank" rel="nofollow">知乎</a> 上有不少好的推荐。由于我对 Material Design 非常感兴趣，我选择的是 <a href="https://github.com/viosey/hexo-theme-material" target="_blank" rel="nofollow">hexo-theme-material</a>，注意有个 <a href="https://github.com/wayou/hexo-theme-material" target="_blank" rel="nofollow">同名</a> 的主题，要区分开来。</p>



<p>如果你也选择了 hexo-theme-material（指 Viosey 创作的主题，下同），我还在本文后面附上配置这个主题的一些注意事项。</p>



<p>选择完了之后，进入其 GitHub 的仓库，点击右上角的“Fork”以拷贝该项目的代码到自己这里。</p>



<h3>站点配置文件 config.yml</h3>



<p>接下来编辑 <code>config.yml</code>，这是整个博客站点的编辑文件，要修改的地方其实也不多，数数有多少个中括号就知道了。强调：所有的半角冒号后面都有一个空格别弄丢了。</p>



<pre class="wp-block-code"><code># Hexo Configuration
## Docs: https://hexo.io/docs/configuration.html
## Source: https://github.com/hexojs/hexo/

# Site
title: 【站点的标题】
subtitle: 【站点的副标题】
description: 【站点的描述】
author: 【作者名字】
language: 【这里填写 zh-CN】
timezone: 【这里填写 Asia/Shanghai】

# URL
## If your site is put in a subdirectory, set url as 'http://yoursite.com/child' and root as '/child/'
url: 【这里填写 https://【你的 GitHub 用户名】.github.io，打算在后面绑定自己的域名的填写相应的完整 URL】
root: 【这里填写 /】
permalink: :year/:month/:day/:title/
permalink_defaults:

# Directory
source_dir: source
public_dir: public
tag_dir: tags
archive_dir: archives
category_dir: categories
code_dir: downloads/code
i18n_dir: :lang
skip_render:

# Writing
new_post_name: :title.md # File name of new posts
default_layout: post
titlecase: false # Transform title into titlecase
external_link: true # Open external links in new tab
filename_case: 0
render_drafts: false
post_asset_folder: false
relative_link: false
future: true
highlight:
  enable: true
  line_number: true
  auto_detect: false
  tab_replace:

# Search
search:
  path: search.xml
  field: all

# Home page setting
# path: Root path for your blogs index page. (default = '')
# per_page: Posts displayed per page. (0 = disable pagination)
# order_by: Posts order. (Order by date descending by default)
index_generator:
  path: ''
  per_page: 10
  order_by: -date

# Category &amp; Tag
default_category: uncategorized
category_map:
tag_map:

# Date / Time format
## Hexo uses Moment.js to parse and display date
## You can customize the date format as defined in
## http://momentjs.com/docs/#/displaying/format/
date_format: YYYY-MM-DD
time_format: HH:mm:ss

# Pagination
## Set per_page to 0 to disable pagination
per_page: 10
pagination_dir: page

# Extensions
## Plugins: https://hexo.io/plugins/
## Themes: https://hexo.io/themes/
theme: 【这里填写主题名称，允许起别名，后面我会提醒你在哪里作修改。例如 material】

# Deployment
## Docs: https://hexo.io/docs/deployment.html
deploy:
type:
</code></pre>



<p>保存退出即可。</p>



<h3>绑定个人域名（可选）</h3>



<p>如果你有一个个人域名需要绑定，进入 <code>source/</code> 文件夹（默认情况下只有一个 source/_posts 的入口，很简单，先点进去，再返回上一级目录），新建一个 <code>CNAME</code> 的文件，在里面输入：</p>



<pre class="wp-block-code"><code>【你打算绑定的域名，如 www.bobby285271.top】
</code></pre>



<p>保存退出，然后参考 <a href="http://www.cnblogs.com/penglei-it/p/hexo_domain_name.html" target="_blank" rel="nofollow">这篇教程</a> 完成后续设置。</p>



<h3>写一篇博客</h3>



<p>进入 <code>source/_posts</code> 文件夹，新建一个文档，命名为 <code>【文档名称，尽量统一只使用英文、数字和“-”】.md</code>，内容大概是这样的：</p>



<pre class="wp-block-code"><code>title: 【文章标题】
date: 【四位年份】-【两位月份】-【两位日期】
layout: post
tags: 
 - 【标签1】
 - 【标签2】
 - 【...】
categories:
 - 【分类父目录】
 - 【分类子目录】
 - 【...】
---

【从这里开始用 Markdown 写作】
</code></pre>



<p>如果您有过使用 WordPress 的经验，就很容易误解 Hexo 的分类方式。WordPress 支持对一篇文章设置多个分类，而且这些分类可以是同级的，也可以是父子分类。但是 Hexo 不支持指定多个同级分类。下面的指定方法：</p>



<pre class="wp-block-code"><code>categories:
- Diary
- Life
</code></pre>



<p>会使分类“Life”成为“Diary”的子分类，而不是并列分类。因此，有必要为您的文章选择尽可能准确的分类。</p>



<h3>建立一个独立页面</h3>



<p>和写博客差不多，进入 <code>source/</code> 文件夹，新建一个文档，命名为 <code>【填一个关键词，如 about】/index.md</code>，这个网页就会在 <code>【你的 GitHub 用户名】.github.io/【你填的关键词】</code> 处显示，内容大概是这样的：</p>



<pre class="wp-block-code"><code>title: 【页面标题】
date: 【可以空着，也可以仿照前面的填写】
layout: 【一般是 page，部分主题还提供其它的 layout，请以主题的文档为准】
---

【从这里开始用 Markdown 写作】
</code></pre>



<h2>主题配置</h2>



<p>主题太多，请参考主题提供的文档配置在前面 Fork 好的仓库，注意站点配置文件和主题配置文件都叫 <code>_config.yml</code>，但两个所在的仓库不同，功能也完全不同。</p>



<p>如果你也选择了 hexo-theme-material，可以阅读 <a href="https://material.viosey.com/docs" target="_blank" rel="nofollow">官方文档</a>，注意：<br>* 如果你想建立友情链接页、图库页、标签云页、时间轴页，请不要按照前面一章的内容做，而是按照 <a href="https://material.viosey.com/docs/#/pages" target="_blank" rel="nofollow">官方文档</a> 的指示做，这样子做出来的页面好看很多。但注意，填写内容时第一行的 <code>---</code> 请删掉，否则可能会出现各种问题；<br>* 用个人惨痛的经历提醒各位：编辑站点配置文件时不要画蛇添足，如在不应该敲空格的地方敲空格（半角冒号后面一定要加一个空格），另外尽量避免负责粘贴！</p>



<h2>胜利的曙光</h2>



<h3>构建博客的 Travis CI 配置文件</h3>



<p>这回又是配置 Travis CI，注意上次配置的文件是一次性的，你应该找不到它才对。<br>返回【你的 GitHub 用户名】.github.io 仓库，检查你所在的分支是否为 blog-source，若不是按照前面所讲修改默认分支，新建文件，命名为 <code>.travis.yml</code>（请勿改名），然后填写以下内容：</p>



<pre class="wp-block-code"><code>language: node_js
node_js: stable

install:
  - npm install

script:
  - git submodule add https://github.com/bobby285271/【主题在 GitHub 仓库的仓库名，如 hexo-theme-material】.git themes/【改成你在站点配置文件中填写的主题别称，如 material】
  - hexo g

after_script:
  - cd ./public
  - git init
  - git config user.name "【你的大名，如 Bobby Rong】"
  - git config user.email "【你的邮箱】"
  - git add -A
  - git commit -m "【提交信息，如 Update files】"
  - git push --force --quiet "https://${githubblog}@${GH_REF}" master

branches:
  only:
    - blog-source

env:
 global:
  - GH_REF: github.com/【你的 GitHub 用户名】/【你的 GitHub 用户名】.github.io.git
</code></pre>



<p>作相应替换后点击“Commit new file”即可。和之前的配置文件看起来差不多的，解释一下：<br>* <code>git submodule add https://github.com/【你的 GitHub 用户名】/【主题在 GitHub 仓库的仓库名，如 hexo-theme-material】.git themes/【改成你在站点配置文件中填写的主题别称，如 material】</code>：将你所 Fork 的主题仓库添加到站点仓库中；<br>* <code>hexo g</code>：生成网页；<br>* <code>cd ./public</code>：生成的网页都在这里面，我们只要里面的文件。</p>



<h3>成功</h3>



<p>回到 Travis CI，按照前面所讲查看自己的构建进度，只需仓库名旁边的图标变成了 Build passing（底色还是原谅绿），你就可以前往 <code>https://【你的 GitHub 用户名】.github.io</code> 或你绑定的域名查看你的网页了。至于后续修改，只需前往【你的 GitHub 用户名】.github.io 仓库，确认所在分支后编辑相应的文件就行了，详情请参考 Hexo 的 <a href="https://hexo.io/zh-cn/docs" target="_blank" rel="nofollow">官方文档</a>，一旦仓库有变动，Travis 就会自动构建新的网页。</p>
	</div>

	<footer class="amp-wp-article-footer">
			<div class="amp-wp-meta amp-wp-tax-category">
		Categories: <a href="../../../../../../web/index.html" rel="category tag">Web</a>	</div>

	<div class="amp-wp-meta amp-wp-tax-tag">
		Tags: <a href="../../../../../tag/blog/index.html" rel="tag">Blog</a>, <a href="../../../../../tag/github/index.html" rel="tag">GitHub</a>, <a href="../../../../../tag/hexo/index.html" rel="tag">Hexo</a>, <a href="../../../../../tag/travis/index.html" rel="tag">Travis</a>	</div>
		<div class="amp-wp-meta amp-wp-comments-link">
		<a href="../../../../../../index.html%3Fp=915.html#respond">
			Leave a Comment		</a>
	</div>
	</footer>
</article>

<footer class="amp-wp-footer">
	<div>
		<h2>Dasyatis</h2>
		<a href="index.html#top" class="back-to-top">Back to top</a>
	</div>
</footer>


	<amp-pixel src="https://pixel.wp.com/g.gif?v=ext&amp;j=1%3A8.4.2&amp;blog=172618889&amp;post=915&amp;tz=8&amp;srv=www.bobby285271.top&amp;host=www.bobby285271.top&amp;rand=RANDOM&amp;ref=DOCUMENT_REFERRER" class="i-amphtml-layout-fixed i-amphtml-layout-size-defined" style="width:1px;height:1px;" i-amphtml-layout="fixed"></amp-pixel>
	

</body></html>
